---
typora-copy-images-to: ./imgs
---

<p align="center"><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="知识共享许可协议" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a></p>

<p align="center"><b>本作品采用<a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">知识共享署名-相同方式共享 4.0 国际许可协议</a>进行许可。</b></p>

<p align="center"><b>This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</b></p>

# 基于Flutter、Arduino和Raspberry Pi的情境感知互助系统：以退伍军人的特殊需求社区为例

## 场景

### 进入社区

1. 概述

   该部分阐述了用户进入社区的智能化流程，以一种安全便捷的方式为用户提供了智能化的进入社区体验

2. 介绍

   1. 通过闸机

      使用身份ID

   2. 进入停车场

      1. 概述

         当用户驾驶机动车辆（七座及以下）进入社区时，系统会根据车位剩余情况及目的地分配车位，车主可以根据停车场内标识牌指引前往停车

      2. 特殊情况

         1. 若欲进入的车辆为新能源车，车主可在登记进入时或通勤设置中登记需要充电，也可以通过手机或车机通知临时登记。登记后，系统将为需要充电的车辆分配充电车位。需要注意的是，如果车主将车辆泊入充电车位但不充电且不响应移车请求，将被梯度限制充电权限

            停车场的充电区比较特别：充电区被特别保护，使用道闸控制进出。对充电的限制是基于此完成的

         2. 若车主安装了智慧社区程序，系统将为车主的手机或车机发送目的地并询问是否进行室内路线引导，使用动画指引停车

         3. （设想，可使用动画演示）若车主的车辆支持自动驾驶且与社区系统对接，系统将询问是否直接接管车辆自动驾驶，自动泊入目标车位

   3. 乘电梯

      1. 概述

         用户可以使用智能电梯系统乘电梯

      2. 方式

         1. 闸机

            用户可以在公共楼层通过闸机，使用身份ID进入电梯间，此时系统将把其目的楼层发送给电梯的智能分配系统[^智能分配]并通过闸机上的显示屏显示分配结果，用户须到指定电梯等待并乘坐

            [^智能分配]:在本项目中使用假数据。现实中各个电梯公司都有这样的系统，在实际应用时可以直接接入

         2. 电梯呼叫屏

            用户可以使用身份ID呼叫电梯

         3. 特殊情况

            1. 如果用户有多个目的地，通过闸机时，系统将不会为其分配电梯，而是给予一个醒目的提示，要求到电梯呼叫屏上进行进一步操作

3. 智能化联动

   1. 概述

      用户进入社区后，绝大部分情况是回到家中休息，我们可以利用这一点，引导用户通过简单的编程的方式，创造一个智能化的联动

   2. 例子

      1. 通勤

         通勤的用户通常会在到家后进行重复、繁琐的工作。因此可以进行这样的设置：在温度高于27摄氏度的工作日开启空调制冷并设置温度（如26摄氏度）；在温度低于20摄氏度的工作日开启制热；开启或关闭空气净化器；让电饭煲开始煮饭等等。完成后用户会收到通知

      2. 不确定事件

         用户也可以设置一些进入社区后可以被提醒进行的事件。比如用户想在不是特别热的某一天也打开空调，可以设置提醒触发条件，在进入社区后收到通知并选择是否执行

4. 特殊情况

   1. 如果用户有串门的需求，可以通过智慧社区程序或家中的智能终端互相邀请和申请。如果用户感到烦人，可以进行隐私设置。这种方式方便了安全管理的同时也能解决寻找小孩[^找小孩]的问题

      [^找小孩]:在我的社区中，经常会出现家长在业主群里找小孩的情况

   2. 对于外卖人员，系统会在其进入社区执行配送任务时根据公开的配送信息分配一条合理的配送路线并为其发送通知，可以选择是否接受，也可以在手机上查看路线、增[^增加目的地]减目的地，只要配送路线还中存在某个楼栋，那么这个楼栋的闸机将为其开放。如果接受，在同一楼栋内，配送员需遵循楼层路线，这样可以避免在同一楼栋内移动时，手动操作选择目的楼层的问题；不接受则需前往电梯呼叫屏操作目的楼层

      [^增加目的地]:增加目的地的行为将被系统记录，如有异常将及时冻结该配送员增加权限

## 实现细节

### 闸机

1. 概述

   闸机带有显示屏和扬声器等设备，支持识别身份ID ，可以部署宽、窄两种，可以通过语音播报状态信息（如放行、分配的电梯等），方便不同人群

2. 模型

   使用3D打印，只保留关键部分（摄像头、显示屏、指纹识别器、读卡器和二维码扫描器），通过显示屏演示放行等信息。如有余力，可以外接一个演示版的“门”，如一个大拇指，放行便竖起

3. 大致材料

   1. 开发板：1
   2. 摄像头：1
   3. 显示屏：1
   4. 扬声器：1
   5. 指纹识别模块：1
   6. 读卡模块：1
   7. 二维码扫描模块：1
   8. 3D耗材

### 车牌识别与车辆入库

1. 概述

   车牌识别使用图像识别模型，如实在无法实现，使用假数据，在应用时直接使用现有系统。入口旁需要至少一个显示屏和扬声器，显示屏用于显示登记二维码、分配的电梯等信息，扬声器用于进行语音提示

2. 材料

   1. 开发板：1
   2. 显示屏：1
   3. 扬声器：1
   4. 摄像头：1

### 智能化联动

可能暂时无法实现，可用假数据。如在应用时需要实现，可接入现有的智能家居平台（如米家）

## 定义

### 身份ID

1. 生物特征：最值得信任
   1. 人脸
   2. 指纹
   3. （可能无法实现）掌静脉
2. 电子ID
   1. 临时二维码（出闸即毁）
   2. 卡（身份证、手机NFC）

#### 注意事项

1. 关于访客

   1. 单次访问

      在访问前向住户索取邀请链接并自主登记，也可以在社区服务中心进行申请、登记

   2.  长期往返[^长期往返]

      [^长期往返]:在一个比较长的时间内多次进出社区

      在智慧社区程序或社区服务中心登记长期往返需求，社区根据实际往返频次和该用户在社区内的表现记录，每次[^每次登记长期往返]给予其一周至一月的临时访客身份ID

      [^每次登记长期往返]:前提是上一个临时ID已过期

2. 外卖人员需在第一次访问时登记个人信息并创建身份ID ，同时将公开配送信息接入系统以实现智能服务
